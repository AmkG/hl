(closure 0
  (check-vars 2)
  (<bc>recv))
(global-set <common>recv)

(closure 0
  (check-vars 3)
  (<bc>spawn))
(global-set <common>spawn)

(<bc>self-pid)
(global-set main-pid)

(global <common>spawn)
(k-closure 0
  (check-vars 2)
  (global <common>recv)
  (k-closure 0
    (check-vars 2)
    (local 1)
    (halt))
  (apply 2))
(k-closure 0
  (check-vars 1)
  (k-closure 0
    (local 1)
    (halt))
  (global main-pid)
  (int 42)
  (<bc>send))
(apply 3)


;^42$
